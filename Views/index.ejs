<%- include('./base/header.ejs') %>

    <div class="conatiner my-5 mx-5">
        <form method="GET" action="/" class="d-flex mb-3">
            <input type="text" name="search" class="form-control me-2" placeholder="Search by name, email or city"
                value="<%= search %>">
            <button class="btn btn-primary">Search</button>
        </form>

        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Sr No.</th>
                    <th scope="col">Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">City</th>
                    <th scope="col">Contact</th>
                    <th scope="col">Edit</th>
                    <th scope="col">Delete</th>

                </tr>
            </thead>
            <tbody>
                <% for(let i=0 ; i<records.length ; i++){ %>
                    <tr>
                        <th scope="row">
                            <%=i+1%>
                        </th>
                        <td>
                            <%=records[i].name %>
                        </td>
                        <td>
                            <%=records[i].email %>
                        </td>
                        <td>
                            <%=records[i].city %>
                        </td>
                        <td>
                            <%=records[i].contact %>
                        </td>
                        <td><a href="/edit/<%=records[i]._id %>">Edit</a></td>
                        <td>
                            <form action="/delete/<%= records[i]._id %>" method="POST">
                                <input type="submit" value="Delete">
                            </form>
                        </td>


                    </tr>

                    <% } %>
            </tbody>
        </table>
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">

                <% if (currentPage> 1) { %>
                    <li class="page-item">
                        <a class="page-link" href="/?search=<%= search %>&page=<%= currentPage - 1 %>">Previous</a>
                    </li>
                    <% } %>

                        <% for (let i=1; i <=totalPages; i++) { %>
                            <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                                <a class="page-link" href="/?search=<%= search %>&page=<%= i %>">
                                    <%= i %>
                                </a>
                            </li>
                            <% } %>

                                <% if (currentPage < totalPages) { %>
                                    <li class="page-item">
                                        <a class="page-link"
                                            href="/?search=<%= search %>&page=<%= currentPage + 1 %>">Next</a>
                                    </li>
                                    <% } %>

            </ul>
        </nav>



    </div>
    <%- include('./base/footer.ejs') %>